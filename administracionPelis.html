<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="shortcut icon" href="assets/img/Popcorn Ico.png">

  <!-- fontawesome 5 -->
  <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script>
 
  <!-- jquery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- bootstrap-table-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.18.3/bootstrap-table.min.js"></script>

  <link rel="stylesheet" href="/css/navbar.css">
  <link rel="stylesheet" href="css/agregarmovie.css">

</head>

<body>
  <!-- Navbar administracionPelis-->

  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container-fluid">
      <img src="assets/img/popcornl2.png" alt="Popcorn Movies"> 
      <a class="navbar-brand text-light" href="#">Popcorn Movies</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon">                       
        </span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          
          <li class="nav-item">
            <a class="nav-link text-light" href="/index.html">Inicio</a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>

<!--   
<table id="bs-table" class="table table-striped table-dark table-hover"
       data-show-columns="true" data-click-to-select="true">
</table> -->

    <!-- ADMINISTRAR PELICULAS -->
    <div class="administracion bg-colorg w-100 main-m">
      <h2 class="p-2 pt-4 titlesandbtns color3">Administración de películas</h2>
      <p class="mx-3 commontexts color6"> En la siguente tabla, se pueden observar todas las películas alojadas en nuestro servidor. Brindando la posibilidad de agregar una película presionando el botón "Crear Película", seleccionar una pelicula de tabla y modificar o eliminarla con los botones "Editar" y "Eliminar" respectivamente.
      </p>
      <div class="d-flex py-3">
          <!-- TABLA DE PELICULAS  -->
          <div class="movies-table table-striped table-dark table-responsive table-hover col-8-5 bg-color1 p-0 ml-2" data-click-to-select="true"></div>
          <div class="col-3 d-flex flex-column mt-5 btns">
              <!-- botón Modal Crear pelicula-->
              <button type="button" class="btn-crear btn bg-color2 color6 p-1 my-1 titlesandbtns" data-toggle="modal" data-target="#crearPeliModal">
          Crear pelicula
                </button>
              <!-- Botón para editar pelicula -->
              <button class="btn-editar btn bg-color2 color6 p-1 my-1 edit-btn titlesandbtns" data-toggle="modal" data-target="#editarPeliModal" disabled>
          Editar pelicula
               </button>
              <!-- Botón para eliminar pelicula -->
              <button class="btn-eliminar btn bg-color2 color6 p-1 my-1 titlesandbtns eliminarPeli" data-toggle="modal" data-target="#eliminarPeliModal" disabled>
          Eliminar pelicula
              </button>
          </div>
      </div>
      <!-- Modal para crear pelicula-->
      <div class="modal fade" id="crearPeliModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                  <form id="rootForm"></form>
              </div>
          </div>
      </div>
      <!-- Modal para editar pelicula-->
      <div class="modal fade" id="editarPeliModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                  <form id="rootFormE"></form>
              </div>
          </div>
      </div>
      <!-- Modal para borrar pelicula-->
      <div class="modal fade" id="eliminarPeliModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                  <div id="rootElim"></div>
              </div>
          </div>
      </div>
  </div>
  <!-- FIN ADMINISTRACIÓN PELICULAS -->

  <script src="/js/controlAdmin.js"></script>
  <script src="js/pp-db js.js"></script>
</body>



<script src="js/pp-db js.js"></script>

<!-- <script src="js/pp-db js.js"></script>

<script>
  const TABLE = document.querySelector("table")
  const TABLE_ID = TABLE.getAttribute("id")
  const table = $(`#${TABLE_ID}`)
  const UNIQUE_ID = 'id'

/*
<div class="table-responsive">
  <table class="table table-dark table-hover">
    ...
  </table>
</div>


*/

  function createBSTable() {

    const columns = [
      {field: "id", title: "ID"},
      {field: "name", title: "Nombre"},
      {field: "director", title: "Director"},    
      {field: "genre", title: "Género"},
      {field: "categorie", title: "Categoría"},
      {field: "year", title: "Año"},
      {field: "publicada", title: "Publicada"},
      {field: "destacada", title: "Destacada"},

      {
        field: "tableAction", title: "Action",
        formatter: (value, row, index, field) => {
          curID = row[UNIQUE_ID]          
          return [
            `<button type="button" class="btn btn-default btn-sm" onclick="deleteItem(${curID})">`,
            `<i class="far fa-trash-alt"></i>`,
            `</button>`,

            `<button type="button" class="btn btn-default btn-sm">`,
            `<i class="far fa-thumbs-up"></i>`,
            `</button>`
          ].join('')
        }
      }
    ]
    
    table.bootstrapTable()
    table.bootstrapTable('refreshOptions',
      {
        columns: columns,
        url: "http://localhost:3000/films",
        //data: films,   
        height: 768,
        uniqueId: "id",
        striped: true,
        pagination: true,
        sortable: true,
        pageNumber: 1,
        pageSize: 10,
        pageList: [10, 25, 50, 100],
        search: true,
        showToggle: true,
        searchHighlight: true,
      }
    )
    table.bootstrapTable('refresh')
  }

  function deleteItem(curID) {
    if (!confirm('Are you sure you want to delete this item? '+curID)) {      
      return
    }

    table.bootstrapTable('removeByUniqueId', curID)

    // const ids = [curID]
    // console.log(ids);
    // table.bootstrapTable('remove', {
    //   field: curID,
    //   values: ids,
    // })   
  }
  
  (
    () => {
      window.onload = () => {
        createBSTable()        
      }
    }
  )()
</script> -->
<script src="js/adminPelis.js"></script>
<!-- <script src="js/agregarMovie.js"></script> -->
<script src="js/crearPelicula.js"></script>
<!-- <script src="js/editarPelicula.js"></script>
<script src="js/borrarPeliculas.js"></script> -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
</html>